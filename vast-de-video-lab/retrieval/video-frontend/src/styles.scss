/* Global Styles for Video Reasoning Lab */
@use '@angular/material' as mat;

/* Include Material theme */
@include mat.core();

/* Define VAST theme with darker space blue colors */
$my-primary: mat.m2-define-palette(mat.$m2-blue-palette, 800, 700, 900);
$my-accent: mat.m2-define-palette(mat.$m2-light-blue-palette, 700, 600, 800);
$my-warn: mat.m2-define-palette(mat.$m2-red-palette);

$my-theme: mat.m2-define-light-theme((
  color: (
    primary: $my-primary,
    accent: $my-accent,
    warn: $my-warn,
  ),
  typography: mat.m2-define-typography-config(),
  density: 0,
));

@include mat.all-component-themes($my-theme);

/* Theme CSS Variables - Dark theme (default) - Using VAST Design Tokens */
:root {
  /* Background Colors - from tokens */
  --bg-primary: #0e1a35; /* blue-900 - screen background primary */
  --bg-secondary: #16233f; /* blue-850 - modal main, secondary backgrounds */
  --bg-card: #16233f; /* blue-850 - panels, modals */
  --bg-card-hover: #253048; /* blue-550 - hover state */
  --bg-header: #0f1a31; /* blue-1000 - table headers, top nav */
  --bg-toolbar: #0f1a31; /* blue-1000 - toolbar background */
  
  /* Border Colors - from tokens */
  --border-color: #343e55; /* blue-400 - outlines, separation lines */
  --border-hover: #505f7f; /* blue-250 - hover borders */
  
  /* Text Colors - from tokens */
  --text-primary: #e8ebec; /* gray-50 - primary text */
  --text-secondary: #c5ccce; /* gray-200 - secondary text */
  --text-muted: #a2aeb4; /* gray-400 - muted text */
  
  /* Accent Colors - from tokens */
  --accent-primary: #73c8fd; /* lightblue-400 - actions, click feedback, hyperlinks */
  --accent-secondary: #0e1a35; /* blue-900 - secondary accents */
  --accent-success: #54e7de; /* cyan-400 - active status */
  --accent-warning: #e8af6f; /* orange-300 - warning status */
  --accent-danger: #e86f6f; /* red-400 - failed status */
  
  /* Shadows - from tokens */
  --shadow: 0 4px 4px rgba(15, 26, 49, 0.25); /* shadow - toast, snack bar */
  --shadow-hover: 0 4px 4px rgba(15, 26, 49, 0.4);
  
  /* Scrollbar - from tokens */
  --scrollbar-track: rgba(162, 174, 180, 0.1); /* gray-400 with opacity */
  --scrollbar-thumb: #a2aeb4; /* gray-400 - scroller color default */
  --scrollbar-thumb-hover: #c5ccce; /* gray-200 - scroller color hover */
  
  /* Buttons - from tokens */
  --button-bg-primary: #73c8fd; /* lightblue-400 - primary button background */
  --button-bg-hover: #b7e3ff; /* lightblue-200 - primary button hover */
  --button-text: #0e1a35; /* blue-900 - primary button text */
  
  /* Additional token-based colors for component-specific use */
  --color-blue-900: #0e1a35;
  --color-blue-850: #16233f;
  --color-blue-800: #1c2944;
  --color-blue-700: #1f2c47;
  --color-blue-500: #25304a;
  --color-blue-450: #39435b;
  --color-blue-400: #343e55;
  --color-blue-300: #4a5e88;
  --color-blue-250: #505f7f;
  --color-blue-1000: #0f1a31;
  --color-lightblue-400: #73c8fd;
  --color-lightblue-200: #b7e3ff;
  --color-gray-50: #e8ebec;
  --color-gray-200: #c5ccce;
  --color-gray-400: #a2aeb4;
  --color-gray-600: #7a898e;
  --color-cyan-400: #54e7de;
  --color-red-400: #e86f6f;
  --color-orange-300: #e8af6f;
}

/* Light theme - Using design token principles with light adaptations */
[data-theme="light"] {
  /* Background Colors - light theme adaptations - softer, warmer beige */
  --bg-primary: #f5f3ef; /* Softer, warmer beige background */
  --bg-secondary: #f8f6f2; /* Softer, warmer lighter beige */
  --bg-card: rgba(252, 250, 246, 0.98); /* Warmer, softer white-beige */
  --bg-card-hover: rgba(255, 253, 250, 1); /* Softer warm white-beige on hover */
  --bg-header: linear-gradient(135deg, rgba(248, 246, 242, 0.98) 0%, rgba(245, 243, 239, 0.98) 100%);
  --bg-toolbar: linear-gradient(135deg, #b7e3ff 0%, #73c8fd 100%); /* lightblue-200 to lightblue-400 gradient */
  
  /* Border Colors - using token blue colors with low opacity for light theme */
  --border-color: rgba(52, 62, 85, 0.2); /* blue-400 with low opacity */
  --border-hover: rgba(52, 62, 85, 0.4); /* blue-400 with higher opacity */
  
  /* Text Colors - dark text for light theme */
  --text-primary: #0e1a35; /* blue-900 - dark text */
  --text-secondary: rgba(14, 26, 53, 0.85); /* blue-900 with opacity */
  --text-muted: rgba(14, 26, 53, 0.65); /* blue-900 with lower opacity */
  
  /* Accent Colors - using design tokens adapted for light theme */
  --accent-primary: #73c8fd; /* lightblue-400 - actions, hyperlinks */
  --accent-secondary: #0e1a35; /* blue-900 - secondary accents */
  --accent-success: #54e7de; /* cyan-400 - active status */
  --accent-warning: #e8af6f; /* orange-300 - warning status */
  --accent-danger: #e86f6f; /* red-400 - failed status */
  
  /* Shadows - lighter shadows for light theme */
  --shadow: 0 4px 4px rgba(15, 26, 49, 0.1); /* Lighter shadow */
  --shadow-hover: 0 4px 4px rgba(15, 26, 49, 0.15);
  
  /* Scrollbar - using token colors with opacity */
  --scrollbar-track: rgba(162, 174, 180, 0.1); /* gray-400 with opacity */
  --scrollbar-thumb: rgba(122, 137, 142, 0.4); /* gray-600 with opacity */
  --scrollbar-thumb-hover: rgba(122, 137, 142, 0.6); /* gray-600 with higher opacity */
  
  /* Buttons - using design tokens */
  --button-bg-primary: #73c8fd; /* lightblue-400 - primary button */
  --button-bg-hover: #b7e3ff; /* lightblue-200 - button hover */
  --button-text: #0e1a35; /* blue-900 - button text on light background */
  
  /* Additional token-based colors for light theme */
  --color-blue-900: #0e1a35;
  --color-blue-850: #16233f;
  --color-blue-800: #1c2944;
  --color-blue-700: #1f2c47;
  --color-blue-500: #25304a;
  --color-blue-450: #39435b;
  --color-blue-400: #343e55;
  --color-blue-300: #4a5e88;
  --color-blue-250: #505f7f;
  --color-blue-1000: #0f1a31;
  --color-lightblue-400: #73c8fd;
  --color-lightblue-200: #b7e3ff;
  --color-gray-50: #e8ebec;
  --color-gray-200: #c5ccce;
  --color-gray-400: #a2aeb4;
  --color-gray-600: #7a898e;
  --color-cyan-400: #54e7de;
  --color-red-400: #e86f6f;
  --color-orange-300: #e8af6f;
}

/* Login screen theme isolation - always use dark theme with design tokens */
app-login,
app-login * {
  --bg-primary: #0e1a35 !important; /* blue-900 */
  --bg-secondary: #16233f !important; /* blue-850 */
  --bg-card: #16233f !important; /* blue-850 */
  --bg-card-hover: #253048 !important; /* blue-550 */
  --text-primary: #e8ebec !important; /* gray-50 */
  --text-secondary: #c5ccce !important; /* gray-200 */
  --text-muted: #a2aeb4 !important; /* gray-400 */
  --border-color: #343e55 !important; /* blue-400 */
  --border-hover: #505f7f !important; /* blue-250 */
}

/* Reset and base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  font-family: 'Roboto', sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  cursor: default;
  transition: background 0.3s ease, color 0.3s ease;
}

body {
  margin: 0;
  overflow-x: hidden;
}

/* GLOBAL: Force default cursor everywhere to prevent I-beam */
* {
  cursor: default !important;
}

/* Exceptions for interactive elements */
button, a, input[type="button"], input[type="submit"], .mat-mdc-button, .mat-mdc-raised-button, .mat-mdc-icon-button {
  cursor: pointer !important;
  
  &[disabled] {
    cursor: not-allowed !important;
  }
  
  * {
    cursor: pointer !important;
  }
  
  &[disabled] * {
    cursor: not-allowed !important;
  }
}

/* Prevent text cursor on non-editable elements */
/* Allow text selection everywhere but NO I-beam cursor */
h1, h2, h3, h4, h5, h6, p, span, div, label, 
.mat-mdc-radio-button label,
.mat-mdc-checkbox label,
.hint-chip,
.mat-mdc-button,
.mat-mdc-raised-button {
  user-select: text;  // Allow selection for copy/paste
}

/* Allow text cursor (I-beam) AND selection ONLY on inputs and editable areas */
input, textarea, 
input *, textarea * {
  cursor: text !important;
  user-select: text;
}

/* Buttons should not be selectable */
button, a[mat-button], a[mat-raised-button] {
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  cursor: pointer !important;
}

/* Images should not be draggable or selectable */
img {
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  -webkit-user-drag: none !important;
  pointer-events: none;
}

/* Clickable images should allow pointer events */
img[role="button"], 
img.clickable,
button img,
a img {
  pointer-events: auto;
}

/* Pointer cursor for all clickable elements */
button, 
a, 
mat-chip,
mat-chip-row,
mat-checkbox, 
[role="button"],
[mat-button],
[mat-raised-button],
[mat-flat-button],
[mat-stroked-button],
[mat-icon-button],
[mat-fab],
[mat-mini-fab],
.mat-mdc-button,
.mat-mdc-raised-button,
.mat-mdc-outlined-button,
.mat-mdc-unelevated-button,
.mat-mdc-icon-button,
.mdc-button,
.mdc-icon-button,
.mat-mdc-chip,
.mat-mdc-chip-action,
.mdc-evolution-chip,
.mat-mdc-checkbox,
.clickable {
  cursor: pointer !important;
  
  * {
    cursor: pointer !important;
  }
}

button:disabled,
.mat-mdc-button:disabled,
.mdc-button:disabled {
  cursor: not-allowed !important;
  
  * {
    cursor: not-allowed !important;
  }
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
}

::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

/* Material overrides - theme-aware */
.mat-mdc-form-field {
  color: var(--text-primary) !important;
  
  .mat-mdc-input-element {
    color: var(--text-primary) !important;
    caret-color: var(--accent-secondary);
  }
  
  .mat-mdc-floating-label {
    color: var(--text-secondary) !important;
  }
  
  &.mat-focused .mat-mdc-floating-label {
    color: var(--accent-secondary) !important;
  }
  
  .mat-mdc-form-field-hint,
  .mat-mdc-form-field-error {
    color: var(--text-secondary) !important;
  }
}

.mat-mdc-input-element::placeholder {
  color: var(--text-muted) !important;
}

.mat-mdc-select,
.mat-mdc-select-value,
.mat-mdc-select-trigger {
  color: var(--text-primary) !important;
}

.mat-mdc-option {
  color: var(--text-primary) !important;
  
  &:hover {
    background: rgba(var(--accent-secondary-rgb, 0, 71, 171), 0.15) !important;
  }
}

/* Utility classes */
.full-width {
  width: 100%;
}

.text-center {
  text-align: center;
}

.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.spacer {
  flex: 1;
}

/* Animation classes */
.fade-in {
  animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.slide-up {
  animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Streaming Dialog Global Styles */
.streaming-dialog-container {
  .mat-mdc-dialog-container {
    padding: 0 !important;
    background: transparent !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
    border-radius: 12px !important;
    overflow: hidden !important;
  }

  .mat-mdc-dialog-surface {
    background: transparent !important;
    padding: 0 !important;
  }
}

/* Config Menu Styling - DARK BACKGROUND WITH BLUR, WHITE FONTS */
/* ULTRA AGGRESSIVE OVERRIDES TO FORCE DARK MENU */

/* Target the actual menu panel in the CDK overlay */
.cdk-overlay-pane .mat-mdc-menu-panel.config-menu,
.mat-mdc-menu-panel.config-menu,
div.mat-mdc-menu-panel[role="menu"] {
  background: var(--bg-card) !important;
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 12px !important;
  box-shadow: var(--shadow) !important;
  z-index: 10000 !important;
  margin-top: 4px !important;
  transform-origin: top right !important;
  will-change: transform, opacity !important;
  transition: background 0.3s ease, border-color 0.3s ease;
}

/* Ensure CDK overlay for menu is above toolbar */
.cdk-overlay-container {
  z-index: 10001 !important;
  
  .cdk-overlay-pane[data-mat-menu-panel] {
    z-index: 10001 !important;
  }
}

/* Ensure dialog overlays are above toolbar */
.cdk-overlay-container .cdk-overlay-pane[data-mat-dialog-panel] {
  z-index: 10002 !important;
}

/* Smooth enter animation */
.cdk-overlay-pane:not(.cdk-overlay-pane-leaving) .mat-mdc-menu-panel.config-menu {
  animation: menuSlideIn 0.25s cubic-bezier(0.25, 0.8, 0.25, 1) forwards !important;
}

/* Smooth exit animation */
.cdk-overlay-pane.cdk-overlay-pane-leaving .mat-mdc-menu-panel.config-menu {
  animation: menuSlideOut 0.2s cubic-bezier(0.4, 0, 0.6, 1) forwards !important;
}

.cdk-overlay-pane .mat-mdc-menu-panel.config-menu .mat-mdc-menu-content,
.mat-mdc-menu-panel.config-menu .mat-mdc-menu-content,
div.mat-mdc-menu-panel[role="menu"] .mat-mdc-menu-content {
  padding: 0.5rem !important;
  background: transparent !important;
}

.cdk-overlay-pane .mat-mdc-menu-panel.config-menu .mat-mdc-menu-item,
.mat-mdc-menu-panel.config-menu .mat-mdc-menu-item,
div.mat-mdc-menu-panel[role="menu"] .mat-mdc-menu-item {
  color: var(--text-primary) !important;
  transition: all 0.2s ease !important;
  border-radius: 8px !important;
  margin: 0.25rem 0 !important;
  padding: 0.75rem 1rem !important;
  font-size: 0.95rem !important;
  background: transparent !important;

  &:hover {
    background: rgba(115, 200, 253, 0.15) !important; /* lightblue-400 with opacity */
    transform: translateX(4px) !important;
  }

  .mat-icon {
    color: var(--accent-primary) !important;
    margin-right: 0.75rem !important;
  }

  span, .mat-mdc-menu-item-text, .mdc-list-item__primary-text {
    color: var(--text-primary) !important;
  }
  
  * {
    color: var(--text-primary) !important;
  }
}

@keyframes slideDownFadeIn {
  from {
    opacity: 0;
    transform: translateY(-12px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Menu open animation */
@keyframes menuSlideIn {
  from {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Menu close animation */
@keyframes menuSlideOut {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
}

/* Global mat-select dropdown panel styling - theme-aware */
.cdk-overlay-pane .mat-mdc-select-panel,
.mat-mdc-select-panel {
  background: var(--bg-card) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 8px !important;
  box-shadow: var(--shadow) !important;
  transition: background 0.3s ease, border-color 0.3s ease;

  .mat-mdc-option {
    color: var(--text-secondary) !important;
    background: transparent !important;

    &:hover:not(.mdc-list-item--disabled) {
      background: rgba(74, 94, 136, 0.3) !important; /* blue-300 with opacity */
    }

    &.mdc-list-item--selected:not(.mdc-list-item--disabled),
    &.mat-mdc-option-active {
      background: rgba(74, 94, 136, 0.4) !important; /* blue-300 with opacity */
      color: var(--accent-primary) !important;
    }

    .mdc-list-item__primary-text {
      color: inherit !important;
    }
  }
}

/* System Prompt Dialog Global Styles */
.system-prompt-dialog-container {
  .mat-mdc-dialog-container {
    padding: 0 !important;
    background: transparent !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
    border-radius: 12px !important;
    overflow: hidden !important;
  }

  .mat-mdc-dialog-surface {
    background: transparent !important;
    padding: 0 !important;
  }
}

/* Advanced LLM Settings dialog container */
.advanced-llm-settings-dialog-container {
  .mat-mdc-dialog-container {
    padding: 0 !important;
    background: transparent !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
    border-radius: 12px !important;
    overflow: hidden !important;
  }

  .mat-mdc-dialog-surface {
    background: transparent !important;
    padding: 0 !important;
  }
}

/* Batch Sync Dialog Global Styles */
.batch-sync-dialog-container {
  .mat-mdc-dialog-container {
    padding: 0 !important;
    background: transparent !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
    border-radius: 12px !important;
    overflow: hidden !important;
    border: 1px solid rgba(52, 62, 85, 0.5) !important; /* blue-400 with opacity */
  }

  .mat-mdc-dialog-surface {
    background: var(--bg-card) !important;
    backdrop-filter: blur(20px) !important;
    padding: 0 !important;
    border-radius: 12px !important;
    transition: background 0.3s ease;
  }

  .mat-mdc-dialog-title {
    padding: 1.5rem 1.5rem 1rem 1.5rem !important;
    margin: 0 !important;
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
  }
}

/* Batch Sync Progress Dialog Global Styles */
.batch-sync-progress-dialog-container {
  .mat-mdc-dialog-container {
    padding: 0 !important;
    background: transparent !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
    border-radius: 12px !important;
    overflow: hidden !important;
    border: 1px solid rgba(52, 62, 85, 0.5) !important; /* blue-400 with opacity */
  }

  .mat-mdc-dialog-surface {
    background: var(--bg-card) !important;
    backdrop-filter: blur(20px) !important;
    padding: 0 !important;
    border-radius: 12px !important;
    transition: background 0.3s ease;
  }
}

/* Streaming Progress Dialog Global Styles */
.streaming-progress-dialog-container {
  .mat-mdc-dialog-container {
    padding: 0 !important;
    background: transparent !important;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
    border-radius: 12px !important;
    overflow: hidden !important;
    border: 1px solid rgba(255, 107, 107, 0.3) !important;
  }

  .mat-mdc-dialog-surface {
    background: var(--bg-card) !important;
    backdrop-filter: blur(20px) !important;
    padding: 0 !important;
    border-radius: 12px !important;
    transition: background 0.3s ease;
  }
}

/* Snackbar styling for system prompt save feedback */
.success-snackbar {
  --mdc-snackbar-container-color: rgba(19, 74, 152, 0.95);
  --mdc-snackbar-supporting-text-color: white;
}

.info-snackbar {
  --mdc-snackbar-container-color: rgba(19, 74, 152, 0.95);
  --mdc-snackbar-supporting-text-color: white;
}

/* Logo theme adaptation */
.app-toolbar .logo,
.logo {
  filter: brightness(0) invert(1);
  transition: filter 0.3s ease;
}

[data-theme="light"] .app-toolbar .logo,
[data-theme="light"] .logo {
  filter: brightness(0) invert(0);
}
