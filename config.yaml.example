# Orbital Dynamics: Centralized Configuration
# This file contains all non-sensitive configuration settings for all labs

# VAST Connection Settings (non-sensitive)
vast:
  user: admin
  address: "https://your-vms-hostname"
  ssl_verify: false
  # Note: password, token, and tenant_name are stored in secrets.yaml

# VAST Database Settings (one connection, multiple databases)
# Uses S3 credentials from s3 section above
# NOTE: This should be the VAST Database VIP pool endpoint, NOT the VMS endpoint
vastdb:
  endpoint: "https://your-vastdb-vip-hostname"  # VAST Database VIP pool endpoint
  ssl_verify: false
  timeout: 30


# S3 Configuration for VAST Data Platform
# NOTE: This uses the VMS endpoint for S3 operations
s3:
  endpoint_url: "https://your-vms-hostname"
  region: "us-east-1"
  verify_ssl: false
  compatibility:
    path_style_addressing: true

# Lab 1: Storage Automation Settings
lab1:
  storage:
    auto_provision_threshold: 75  # Percentage at which to auto-provision
    expansion_factor: 1.5  # How much to expand by
    max_expansion_gb: 10000  # Maximum expansion in GB
  
  monitoring:
    alert_threshold: 80  # Percentage at which to alert
    critical_threshold: 90  # Percentage at which to take immediate action
    refresh_interval_seconds: 30  # Dashboard refresh interval
    interval_seconds: 300  # 5 minutes between monitoring cycles
  
  # View settings
  views:
    raw_data:
      path: "/your-name/lab1-raw"
      bucket_name: "your-name-lab1-raw"
      quota_gb: 10240  # 10TB
      policy_name: "s3_default_policy"
      bucket_owner: "your-email@example.com"
      protocols: ["S3", "NFS"]
    
    processed_data:
      path: "/your-name/lab1-processed" 
      bucket_name: "your-name-lab1-processed"
      quota_gb: 20480  # 20TB
      policy_name: "s3_default_policy"
      bucket_owner: "your-email@example.com"
      protocols: ["S3", "NFS"]

# Lab 2: Metadata Infrastructure Settings
lab2:
  # Raw data view for Swift dataset uploads
  raw_data:
    view_path: "/your-name/lab2-raw"
    policy_name: "s3_default_policy"
    bucket_owner: "your-email@example.com"
  
  # Database configuration within VAST Database
  database:
    name: "lab2-metadata-db"  # Database name within VAST Database
    schema: "satellite_observations"  # Schema within that database
    view_path: "/your-name/lab2-metadata-db"  # View path for this database
    policy_name: "s3_default_policy"
    bucket_owner: "your-email@example.com"

# Lab 3: Weather Data Analytics Settings
lab3:
  # Database configuration within VAST Database
  database:
    name: "weather_analytics"  # Database name within VAST Database
    schema: "weather_analytics"  # Schema within that database
    view_path: "/your-name/lab3-weather-db"  # View path for this database
    policy_name: "s3_default_policy"
    bucket_owner: "your-email@example.com"
  
  # Weather data presets
  weather:
    presets:
      test: ["Beijing", "London"]  # Basic 2-city set for quick testing
      extended: ["Beijing", "London", "New York", "Tokyo", "Mumbai", "Los Angeles"]  # 6 major global cities with diverse weather patterns
      pollution: ["Delhi", "Lahore", "Mexico City", "Krakow", "Ulaanbaatar", "Los Angeles"]  # High-pollution cities for dramatic air quality analysis
      global: ["Beijing", "London", "New York", "Tokyo", "Mumbai", "Los Angeles", "Delhi", "Mexico City", "Krakow", "Ulaanbaatar"]  # Comprehensive 10-city global dataset
    preset_descriptions:
      test: "Basic 2-city set for quick testing"
      extended: "6 major global cities with diverse weather patterns"
      pollution: "High-pollution cities for dramatic air quality analysis (Delhi: extreme PM2.5, Lahore: winter pollution, Mexico City: ozone issues, Krakow: coal heating, Ulaanbaatar: extreme seasonal variation, LA: classic smog)"
      global: "Comprehensive 10-city global dataset for advanced analytics" 

# Lab 4: Snapshot Strategy Settings
lab4:
  # Protection policies by data classification
  protection_policies:
    raw_data:
      schedule: "every 6h start-at 2025-01-16 00:00:00 keep-local 3d"
      prefix: "raw-6h-policy"

    processed_data:
      schedule: "every 24h start-at 2025-01-16 00:00:00 keep-local 14d"
      prefix: "processed-daily-policy"

    analysis_results:
      schedule: "every 7d start-at 2025-01-16 00:00:00 keep-local 90d"
      prefix: "analysis-weekly-policy"

    published_datasets:
      schedule: "every 30d start-at 2025-01-16 00:00:00 keep-local 365d"
      prefix: "published-monthly-policy"

    # Test policy for lab takers to practice snapshot operations
    test_snapshot:
      schedule: "every 1h start-at 2025-01-16 00:00:00 keep-local 24h"
      prefix: "test-snapshot-policy"

  # View settings (standardized with other labs)
  views:
    raw_data:
      path: "/your-name/lab4-raw"
      bucket_name: "your-name-lab4-raw"
      quota_gb: 10240  # 10TB
      policy_name: "s3_default_policy"
      bucket_owner: "your-email@example.com"
      protocols: ["S3", "NFS"]
    
    processed_data:
      path: "/your-name/lab4-processed"
      bucket_name: "your-name-lab4-processed"
      quota_gb: 20480  # 20TB
      policy_name: "s3_default_policy"
      bucket_owner: "your-email@example.com"
      protocols: ["S3", "NFS"]
    
    analysis_results:
      path: "/your-name/lab4-analysis"
      bucket_name: "your-name-lab4-analysis"
      quota_gb: 5120  # 5TB
      policy_name: "s3_default_policy"
      bucket_owner: "your-email@example.com"
      protocols: ["S3", "NFS"]
    
    published_datasets:
      path: "/your-name/lab4-published"
      bucket_name: "your-name-lab4-published"
      quota_gb: 10240  # 10TB
      policy_name: "s3_default_policy"
      bucket_owner: "your-email@example.com"
      protocols: ["S3", "NFS"]
    
    # Test view for lab takers to practice snapshot restoration
    test_snapshot:
      path: "/your-name/lab4-test-snapshot"
      bucket_name: "your-name-lab4-test-snapshot"
      quota_gb: 1024  # 1TB - smaller for testing
      policy_name: "s3_default_policy"
      bucket_owner: "your-email@example.com"
      protocols: ["S3", "NFS"]

  snapshot_naming:
    include_timestamp: true
    include_user: true
    include_milestone: true
    max_name_length: 100

  restoration:
    dry_run_default: true
    backup_before_restore: true
    confirmation_required: true